(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{6015:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(25),c=n(65),o=function(e){var t=e.children;return a.a.createElement(c.b,null,t)},s=n(45),l=n(31),u=n(91),f=n(90),m=Object(s.b)(null,{fetchRoles:l.j,fetchPermissions:f.e,fetchEntities:u.d})(function(e){var t=e.fetchRoles,n=e.fetchPermissions,a=e.fetchEntities,i=e.children;return Object(r.useEffect)(function(){a()},[]),Object(r.useEffect)(function(){n()},[]),Object(r.useEffect)(function(){t()},[]),i}),d=n(118),p=(n(3),n(119)),b=n.n(p),v=n(79),h=n.n(v),g=n(52);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var E={insert:function(e,t,n){var r=e[0],a=e[1],i=e[2];(0,n.changeValue)(t,r,function(e){var t=[].concat(e||[]);return t.splice(a,0,i),t})},move:function(e,t,n){var r=e[0],a=e[1],i=e[2],c=n.changeValue;if(a!==i){c(t,r,function(e){var t=[].concat(e||[]),n=t[a];return t.splice(a,1),t.splice(i,0,n),t});var o=r+"["+a+"]";Object.keys(t.fields).forEach(function(e){if(e.substring(0,o.length)===o){var n=e.substring(o.length),c=o+n,l=t.fields[c];if(a<i)for(var u=a;u<i;u++)s({destKey:r+"["+u+"]"+n,source:t.fields[r+"["+(u+1)+"]"+n]});else for(var f=a;f>i;f--)s({destKey:r+"["+f+"]"+n,source:t.fields[r+"["+(f-1)+"]"+n]});s({destKey:r+"["+i+"]"+n,source:l})}})}function s(e){var n=e.destKey,r=e.source;t.fields[n]=y({},r,{name:n,change:t.fields[n].change,blur:t.fields[n].blur,focus:t.fields[n].focus,lastFieldState:void 0})}},pop:function(e,t,n){var r,a=e[0];return(0,n.changeValue)(t,a,function(e){if(e)return e.length?(r=e[e.length-1],e.slice(0,e.length-1)):[]}),r},push:function(e,t,n){var r=e[0],a=e[1];(0,n.changeValue)(t,r,function(e){return e?[].concat(e,[a]):[a]})},remove:function(e,t,n){var r,a=e[0],i=e[1];return(0,n.changeValue)(t,a,function(e){var t=[].concat(e||[]);return r=t[i],t.splice(i,1),t}),r},shift:function(e,t,n){var r,a=e[0];return(0,n.changeValue)(t,a,function(e){if(e)return e.length?(r=e[0],e.slice(1,e.length)):[]}),r},swap:function(e,t,n){var r=e[0],a=e[1],i=e[2],c=n.changeValue;if(a!==i){c(t,r,function(e){var t=[].concat(e||[]),n=t[a];return t[a]=t[i],t[i]=n,t});var o=r+"["+a+"]",s=r+"["+i+"]";Object.keys(t.fields).forEach(function(e){if(e.substring(0,o.length)===o){var n=e.substring(o.length),r=o+n,a=s+n,i=t.fields[r];l({destKey:r,source:t.fields[a]}),l({destKey:a,source:i})}})}function l(e){var n=e.destKey,r=e.source;t.fields[n]=y({},r,{name:n,change:t.fields[n].change,blur:t.fields[n].blur,focus:t.fields[n].focus,lastFieldState:void 0})}},unshift:function(e,t,n){var r=e[0],a=e[1];(0,n.changeValue)(t,r,function(e){return e?[a].concat(e):[a]})},update:function(e,t,n){var r=e[0],a=e[1],i=e[2];(0,n.changeValue)(t,r,function(e){var t=[].concat(e||[]);return t.splice(a,1,i),t})}};function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var j=function(e,t){var n=e[0],r=e[1],a=t.fields[n];a&&(a.data=O({},a.data,r))},w=n(185),S=n(93);function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var R={"final-form":S.f,"react-final-form":g.d,"react-final-form-arrays":"2.0.1"},V=S.d.reduce(function(e,t){return e[t]=!0,e},{}),N=function(e){function t(t){var n,r;return F(x(x(n=e.call(this,t)||this)),"isEqual",function(e,t){return"function"!=typeof n.props.isEqual||n.props.isEqual(e,t)}),F(x(x(n)),"subscribe",function(e,t){var r=e.name,a=e.subscription;n.unsubscribe=n.props.reactFinalForm.registerField(r,t,a?P({},a,{length:!0}):V,{getValidator:function(){return n.validate},isEqual:n.isEqual})}),F(x(x(n)),"validate",function(){var e=n.props.validate;if(e){var t=e(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]);if(!t||Array.isArray(t))return t;var r=[];return r[S.a]=t,r}}),F(x(x(n)),"bindMutators",function(e){var t=e.name,r=n.props.reactFinalForm;if(r){var a=r.mutators;0,!!(a&&a.push&&a.pop)&&(n.mutators=Object.keys(a).reduce(function(e,n){return e[n]=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return a[n].apply(a,[t].concat(r))},e},{}))}}),F(x(x(n)),"notify",function(e){setTimeout(function(){n.mounted&&n.setState({state:e})})}),F(x(x(n)),"forEach",function(e){for(var t=n.props.name,r=n.state.state&&n.state.state.length||0,a=0;a<r;a++)e(t+"["+a+"]",a)}),F(x(x(n)),"map",function(e){for(var t=n.props.name,r=n.state.state&&n.state.state.length||0,a=[],i=0;i<r;i++)a.push(e(t+"["+i+"]",i));return a}),t.reactFinalForm&&n.subscribe(t,function(e){r?n.notify(e):r=e}),n.state={state:r},n.bindMutators(t),n.mounted=!1,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){var t=e.name,n=e.subscription;(this.props.name!==t||function(e,t,n){return e?!t||n.some(function(n){return e[n]!==t[n]}):!!t}(this.props.subscription,n,S.d))&&this.props.reactFinalForm&&(this.unsubscribe(),this.subscribe(e,this.notify)),this.props.name!==t&&this.bindMutators(e)},n.componentDidMount=function(){this.mounted=!0},n.componentWillUnmount=function(){this.mounted=!1,this.unsubscribe()},n.render=function(){var e=this.props,t=e.name,n=k(e,["name"]),a=this.state.state||{},i=a.length,c={active:a.active,dirty:a.dirty,dirtySinceLastSubmit:a.dirtySinceLastSubmit,error:a.error,initial:a.initial,invalid:a.invalid,pristine:a.pristine,submitError:a.submitError,submitFailed:a.submitFailed,submitSucceeded:a.submitSucceeded,touched:a.touched,valid:a.valid,visited:a.visited},o=P({},c,k(a,["length","active","dirty","dirtySinceLastSubmit","error","initial","invalid","pristine","submitError","submitFailed","submitSucceeded","touched","valid","visited"]));return function(e,t){var n=e.render,a=e.children,i=e.component,c=k(e,["render","children","component"]);return i?Object(r.createElement)(i,P({},c,{children:a})):n?n(P({},c,{children:a})):a(c)}(P({fields:P({name:t,forEach:this.forEach,length:i,map:this.map},this.mutators,o),meta:c},n,{__versions:R}))},t}(r.Component);F(N,"displayName","ReactFinalFormFieldArray("+S.f+")(2.0.1)"),Object(w.polyfill)(N);var A=Object(g.e)(N),B=n(4),D=n.n(B),K=n(147),_=n(279),C=n.n(_),L=n(219),q=C()(10)(Object(L.a)({name:[Object(L.c)()]}));function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){M(e,t,n[t])})}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=Object(r.memo)(function(e){var t=e.id,n=e.name,r=e.claims,i=e.save,c=e.permissions,o=e.entities,s=e.classes,l=function(e){return i(I({id:t},e))};return a.a.createElement(b.a,{className:s.paper},a.a.createElement(g.b,{onSubmit:l,validate:q,initialValues:{name:n,claims:r},subscription:{},mutators:I({},E,{setFieldData:j}),render:function(e){var t=e.form;return a.a.createElement("form",{autoComplete:"off"},a.a.createElement(h.a,{container:!0,spacing:24},a.a.createElement(h.a,{item:!0,xs:12,sm:6},a.a.createElement(K.d,{name:"name",label:"Role"}),a.a.createElement(K.a,{setFieldData:t.mutators.setFieldData,save:l})),a.a.createElement(h.a,{item:!0,xs:12,sm:6},a.a.createElement(A,{name:"claims"},function(e){return e.fields.map(function(e,t){return a.a.createElement(K.g,{key:t,name:"".concat(e,".right"),label:o.find(function(e){return e.id===r[t].entity}).name,data:c})})}))))}}))}),H=D()(function(e){return{paper:{padding:3*e.spacing.unit,marginBottom:3*e.spacing.unit}}})(z),J=n(8),T=n.n(J),U=n(26),W=n.n(U),G=n(42),Q=n.n(G),X=n(17),Y=Object(r.memo)(function(e){var t=e.classes;return a.a.createElement("div",{className:t.topBar},a.a.createElement("div",null,a.a.createElement(W.a,{variant:"h6",gutterBottom:!0},"Roles")),a.a.createElement("div",null,a.a.createElement(Q.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){return Object(i.f)("/manage/roles/add")}},a.a.createElement(X.b,{className:T()(t.leftIcon,t.iconSmall)}),"Add Role")))}),Z=D()(function(e){return{topBar:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:2*e.spacing.unit},leftIcon:{marginRight:e.spacing.unit},iconSmall:{fontSize:20}}})(Y);function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ee=function(e){var t=e.roles,n=e.permissions,r=e.entities,i=e.save;return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.Helmet,{title:"Roles"}),a.a.createElement(Z,null),t.roles.map(function(e){return a.a.createElement(H,$({key:e.id},e,{save:i,permissions:n,entities:r}))}))},te=n(282);function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(e){return{paper:{padding:3*e.spacing.unit,marginBottom:3*e.spacing.unit},topBar:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:2*e.spacing.unit},link:{textDecoration:"none",color:"inherit"},text:{display:"inline-block",verticalAlign:"text-bottom"},separator:{marginLeft:e.spacing.unit,paddingLeft:e.spacing.unit,borderLeft:"1px solid rgba(0,0,0,0.1)"}}},ae=D()(re)(Object(r.memo)(function(e){var t=e.classes;return a.a.createElement("div",{className:t.topBar},a.a.createElement("div",null,a.a.createElement(W.a,{variant:"h6"},a.a.createElement(i.a,{className:t.link,to:"/manage/roles"},a.a.createElement("span",{className:t.text},"Roles")),a.a.createElement("span",{className:T()(t.text,t.separator)},"Add"))))})),ie=D()(re)(Object(r.memo)(function(e){var t=e.claims,n=e.error,r=e.isSaving,i=e.entities,c=e.permissions,o=e.add,s=e.classes,l=Object(te.a)(o),u=l.handleSubmit,f=l.Dialog;return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.Helmet,{title:"Roles | Add"}),a.a.createElement(ae,null),a.a.createElement(b.a,{className:s.paper},a.a.createElement(g.b,{onSubmit:u,validate:q,initialValues:{claims:t},mutators:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ne(e,t,n[t])})}return e}({},E),render:function(e){var n=e.handleSubmit,o=e.pristine;return a.a.createElement("form",{onSubmit:n,autoComplete:"off"},a.a.createElement(h.a,{container:!0,spacing:24},a.a.createElement(h.a,{item:!0,xs:12,sm:6},a.a.createElement(K.d,{name:"name",label:"Role Name",autoFocus:!0})),a.a.createElement(h.a,{item:!0,xs:12,sm:6},a.a.createElement(A,{name:"claims"},function(e){return e.fields.map(function(e,n){return a.a.createElement(K.g,{key:n,name:"".concat(e,".right"),label:i.find(function(e){return e.id===t[n].entity}).name,data:c})})})),a.a.createElement(h.a,{container:!0,item:!0,xs:12,justify:"flex-end"},a.a.createElement(Q.a,{type:"submit",variant:"contained",color:"secondary",disabled:o||r},"Add Role"))))}}),a.a.createElement(f,{error:n,message:"The role has been added"})))})),ce=n(281),oe=n(165),se=n(280),le=Object(s.b)(function(e){return{roles:Object(ce.c)(e),entities:Object(oe.b)(e),permissions:Object(se.b)(e)}},{save:l.l})(ee);function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe=Object(s.b)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ue(e,t,n[t])})}return e}({},Object(ce.b)(e),{entities:Object(oe.b)(e),permissions:Object(se.b)(e)})},{add:l.f})(ie),me=function(){return a.a.createElement(i.e,null,a.a.createElement(m,{default:!0},a.a.createElement(le,{default:!0}),a.a.createElement(fe,{path:"add"})))};t.default=function(){return a.a.createElement(i.e,null,a.a.createElement(o,{default:!0},a.a.createElement(me,{path:"roles/*"})))}}}]);